(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{15:function(t,e,n){"use strict";e.a={isAuthenticated:function(t){return t.auth.token},getUserName:function(t){return t.auth.user.name}}},22:function(t,e,n){"use strict";var c=n(17),a=n.n(c),r=n(4);a.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var o=function(t){a.a.defaults.headers.common.Authorization="Bearer ".concat(t)},u=function(){a.a.defaults.headers.common.Authorization=""};e.a={register:function(t){return function(e){e(r.a.registerRequest()),a.a.post("/users/signup",t).then((function(t){o(t.data.token),e(r.a.registerSuccess(t.data))})).catch((function(t){return e(r.a.registerError(t))}))}},login:function(t){return function(e){e(r.a.loginRequest()),a.a.post("/users/login",t).then((function(t){o(t.data.token),e(r.a.loginSuccess(t.data))})).catch((function(t){return e(r.a.logInError(t))}))}},getCurrentUser:function(){return function(t,e){var n=e().auth.token;n&&(o(n),t(r.a.getCurrentUserRequest()),a.a.get("/users/current").then((function(e){var n=e.data;return t(r.a.getCurrentUserSuccess(n))})).catch((function(t){return r.a.getCurrentUserError(t)})))}},logout:function(){return function(t){t(r.a.logoutRequest()),a.a.post("/users/logout").then((function(){u(),t(r.a.logoutSuccess())})).catch((function(e){return t(r.a.logoutError(e))}))}}}},25:function(t,e,n){"use strict";var c=n(1),a=Object(c.b)("theme/changeTheme");e.a={changeTheme:a}},27:function(t,e,n){t.exports={active:"Header_active__1EIrO",list:"Header_list__3J-_k",nav:"Header_nav__qfdLY"}},30:function(t,e,n){t.exports={active:"AuthNav_active__co3at",list:"AuthNav_list__3mAgR"}},4:function(t,e,n){"use strict";var c=n(1),a=Object(c.b)("auth/registerRequest"),r=Object(c.b)("auth/registerSuccess"),o=Object(c.b)("auth/registerError"),u=Object(c.b)("auth/loginRequest"),s=Object(c.b)("auth/loginSuccess"),i=Object(c.b)("auth/loginError"),l=Object(c.b)("auth/logoutRequest"),b=Object(c.b)("auth/logoutSuccess"),d=Object(c.b)("auth/logoutError"),g=Object(c.b)("auth/getCurrentUserRequest"),h=Object(c.b)("auth/getCurrentUserSuccess"),f=Object(c.b)("auth/getCurrentUsererror");e.a={registerRequest:a,registerSuccess:r,registerError:o,loginRequest:u,loginSuccess:s,loginError:i,logoutRequest:l,logoutSuccess:b,logoutError:d,getCurrentUserRequest:g,getCurrentUserSuccess:h,getCurrentUsererror:f}},41:function(t,e,n){"use strict";e.a={getTheme:function(t){return t.themeColor}}},52:function(t,e,n){t.exports={header:"AppBar_header__gCsQD"}},55:function(t,e,n){t.exports=n(85)},6:function(t,e,n){"use strict";var c=n(1),a=Object(c.b)("contacts/ADD_REQUEST"),r=Object(c.b)("contacts/ADD_SUCCESS"),o=Object(c.b)("contacts/ADD_ERROR"),u=Object(c.b)("contacts/FETCH_REQUEST"),s=Object(c.b)("contacts/FETCH_SUCCESS"),i=Object(c.b)("contacts/FETCH_ERROR"),l=Object(c.b)("contacts/DELETE_REQUEST"),b=Object(c.b)("contacts/DELETE_SUCCESS"),d=Object(c.b)("contacts/DELETE_ERROR"),g=Object(c.b)("contacts/changeFilter"),h=Object(c.b)("contacts/CHANGE_CONTACT_REQUEST"),f=Object(c.b)("contacts/CHANGE_CONTACT_SUCCESS"),O=Object(c.b)("contacts/CHANGE_CONTACT_ERROR"),E=Object(c.b)("contacts/addIdEditContact"),j=Object(c.b)("contacts/deleteIdEditContact");e.a={addContactRequest:a,addContactSuccess:r,addContactError:o,fetchContactsRequest:u,fetchContactsSuccess:s,fetchContactsError:i,deleteContactRequest:l,deleteContactSuccess:b,deleteContactError:d,changeContactRequest:h,changeContactSuccess:f,changeContactError:O,changeFilter:g,addIdEditContact:E,deleteIdEditContact:j}},60:function(t,e,n){},85:function(t,e,n){"use strict";n.r(e);var c,a,r,o,u,s,i=n(0),l=n.n(i),b=n(23),d=n.n(b),g=(n(60),n(35)),h=n(36),f=n(38),O=n(37),E=n(41),j=n(22),C=n(8),m=n(16),p=n(5),S=n(15),v=n(52),R=n.n(v),y=n(30),_=n.n(y),A=function(){return l.a.createElement("div",null,l.a.createElement(m.b,{to:"/register",activeClassName:_.a.active,exact:!0},"Register"),l.a.createElement(m.b,{to:"/login",activeClassName:_.a.active,exact:!0},"Login"))},k=n(27),U=n.n(k),T=[{path:"/",label:"Home",exact:!0,component:Object(i.lazy)((function(){return n.e(6).then(n.bind(null,91))})),private:!1,restricted:!1},{path:"/register",label:"Register",exact:!0,component:Object(i.lazy)((function(){return n.e(5).then(n.bind(null,92))})),private:!1,restricted:!0},{path:"/login",label:"Login",exact:!0,component:Object(i.lazy)((function(){return n.e(4).then(n.bind(null,93))})),private:!1,restricted:!0},{path:"/contacts",label:"Contacts",exact:!0,component:Object(i.lazy)((function(){return n.e(3).then(n.bind(null,94))})),private:!0,restricted:!1}],q=Object(C.b)((function(t){return{isAuthenticated:S.a.isAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return console.log(T),l.a.createElement("nav",{className:U.a.nav},l.a.createElement(m.b,{exact:!0,to:"/",activeClassName:U.a.active},"Home Page"),e&&l.a.createElement(m.b,{to:"/contacts",activeClassName:U.a.active},"Contacts"))})),N=Object(C.b)((function(t){return{name:S.a.getUserName(t)}}),{onLogout:j.a.logout})((function(t){var e=t.name,n=t.onLogout;return l.a.createElement("div",null,l.a.createElement("span",null,"Welcome, ",e),l.a.createElement("br",null),l.a.createElement("button",{type:"button",onClick:n},"Logout"))})),x=n(25),D=Object(C.b)((function(t){return{isAuthenticated:S.a.isAuthenticated(t)}}),(function(t){return{toggleTheme:function(){return t(x.a.changeTheme())}}}))((function(t){var e=t.isAuthenticated,n=t.toggleTheme;return l.a.createElement("header",{className:R.a.header},l.a.createElement(q,null),l.a.createElement("button",{type:"button",onClick:n}," ","Change theme"),e?l.a.createElement(N,null):l.a.createElement(A,null))})),H={light:{headerBg:"#F7B30C",fontColor:"black",bodybg:"white"},dark:{headerBg:"#3c3c3c",fontColor:"white",bodybg:"black"}},L=n(26),I=Object(C.b)((function(t){return{isAuthenticated:S.a.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=Object(L.a)(t,["component","isAuthenticated"]);return l.a.createElement(p.b,Object.assign({},c,{render:function(t){return n?l.a.createElement(e,t):l.a.createElement(p.a,{to:"/login"})}}))})),w=Object(C.b)((function(t){return{isAuthenticated:S.a.isAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,c=t.restricted,a=Object(L.a)(t,["component","isAuthenticated","restricted"]);return l.a.createElement(p.b,Object.assign({},a,{render:function(t){return n&&c?l.a.createElement(p.a,{to:"/contacts"}):l.a.createElement(e,t)}}))})),F=function(t){var e="light";return e=t.theme?"light":"dark",l.a.createElement(m.a,null,l.a.createElement("div",{style:{color:H[e].fontColor,background:H[e].bodybg}},l.a.createElement(D,null),l.a.createElement(i.Suspense,{fallback:l.a.createElement("h1",null,"Loading...")},l.a.createElement(p.d,null,T.map((function(t){return t.private?l.a.createElement(I,Object.assign({key:t.label},t)):l.a.createElement(w,Object.assign({key:t.label},t,{restricted:t.restricted}))}))))))},z=function(t){Object(f.a)(n,t);var e=Object(O.a)(n);function n(){return Object(g.a)(this,n),e.apply(this,arguments)}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return l.a.createElement(F,this.props)}}]),n}(i.Component),B=Object(C.b)((function(t){return{theme:E.a.getTheme(t)}}),{onGetCurrentUser:j.a.getCurrentUser})(z),G=n(53),Q=n(1),J=n(19),M=n(33),P=n(54),W=n.n(P),Y=n(2),K=n(34),V=n(7),X=n(6),Z=Object(Q.c)([],(c={},Object(Y.a)(c,X.a.fetchContactsSuccess,(function(t,e){return e.payload})),Object(Y.a)(c,X.a.addContactSuccess,(function(t,e){return[].concat(Object(K.a)(t),[e.payload])})),Object(Y.a)(c,X.a.deleteContactSuccess,(function(t,e){return t.filter((function(t){return t.id!==e.payload}))})),Object(Y.a)(c,X.a.changeContactSuccess,(function(t,e){return t.map((function(t){return t.id===e.payload.contact.id?e.payload.contact:t}))})),c)),$=Object(Q.c)([],(a={},Object(Y.a)(a,X.a.addIdEditContact,(function(t,e){var n=e.payload;return[].concat(Object(K.a)(t),[n])})),Object(Y.a)(a,X.a.deleteIdEditContact,(function(t,e){var n=e.payload;return t.filter((function(t){return t!==n}))})),a)),tt=Object(Q.c)("",Object(Y.a)({},X.a.changeFilter,(function(t,e){return e.payload}))),et=Object(Q.c)(!1,(r={},Object(Y.a)(r,X.a.fetchContactsRequest,(function(){return!0})),Object(Y.a)(r,X.a.fetchContactsSuccess,(function(){return!1})),Object(Y.a)(r,X.a.fetchContactsError,(function(){return!1})),Object(Y.a)(r,X.a.addContactRequest,(function(){return!0})),Object(Y.a)(r,X.a.addContactSuccess,(function(){return!1})),Object(Y.a)(r,X.a.addContactsError,(function(){return!1})),Object(Y.a)(r,X.a.deleteContactRequest,(function(){return!0})),Object(Y.a)(r,X.a.deleteContactSuccess,(function(){return!1})),Object(Y.a)(r,X.a.deleteContactError,(function(){return!1})),Object(Y.a)(r,X.a.changeContactRequest,(function(){return!0})),Object(Y.a)(r,X.a.changeContactSuccess,(function(){return!1})),Object(Y.a)(r,X.a.changeContactError,(function(){return!1})),r)),nt=Object(V.c)({contacts:Z,idEditContact:$,filter:tt,loading:et}),ct=Object(Q.c)(!0,Object(Y.a)({},x.a.changeTheme,(function(t){return!t}))),at=n(4),rt={name:null,email:null},ot=Object(Q.c)(rt,(o={},Object(Y.a)(o,at.a.registerSuccess,(function(t,e){return e.payload.user})),Object(Y.a)(o,at.a.loginSuccess,(function(t,e){return e.payload.user})),Object(Y.a)(o,at.a.getCurrentUserSuccess,(function(t,e){return e.payload})),Object(Y.a)(o,at.a.logoutSuccess,(function(){return rt})),o)),ut=Object(Q.c)(null,(u={},Object(Y.a)(u,at.a.registerSuccess,(function(t,e){return e.payload.token})),Object(Y.a)(u,at.a.loginSuccess,(function(t,e){return e.payload.token})),Object(Y.a)(u,at.a.logoutSuccess,(function(){return null})),u)),st=Object(Q.c)(null,(s={},Object(Y.a)(s,at.a.registerError,(function(t,e){return e.payload})),Object(Y.a)(s,at.a.loginError,(function(t,e){return e.payload})),Object(Y.a)(s,at.a.logoutError,(function(t,e){return e.payload})),Object(Y.a)(s,at.a.getCurrentUserError,(function(t,e){return e.payload})),s)),it=Object(V.c)({user:ot,token:ut,error:st}),lt={key:"auth",storage:W.a,whitelist:["token"]},bt=Object(Q.a)({reducer:{themeColor:ct,contactsRoot:nt,auth:Object(M.a)(lt,it)},middleware:[J.a]}),dt=Object(M.b)(bt);d.a.render(l.a.createElement(C.a,{store:bt},l.a.createElement(G.a,{loading:null,persistor:dt},l.a.createElement(B,null))),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.4fae4f24.chunk.js.map